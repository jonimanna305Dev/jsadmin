<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Webtan - Login & Register</title>
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .bg-pattern {
      background-image: radial-gradient(circle at 10% 20%, rgba(234, 88, 12, 0.1) 0%, transparent 20%);
    }
    .form-transition {
      transition: all 0.3s ease-in-out;
    }
  </style>
</head>
<body class="bg-gray-900">

<!-- Redirect if already logged in -->
<script>
  (function() {
    try {
      const currentUser = JSON.parse(localStorage.getItem('currentUser'));
      if (currentUser && currentUser.email) {
        window.location.href = 'admin/dashboard.html';
      }
    } catch (e) {
      // Invalid JSON, ignore
    }
  })();
</script>

<!-- Main Container -->
<div class="min-h-screen flex items-center justify-center px-4 py-8 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900">
  <div class="bg-gray-800/90 backdrop-blur-sm rounded-3xl shadow-2xl w-full max-w-4xl overflow-hidden border border-gray-700">
    <div class="grid md:grid-cols-2">
      
      <!-- Left Side - Branding & Image -->
      <div class="hidden md:block relative bg-gradient-to-br from-orange-600 to-orange-700 p-8">
        <div class="absolute inset-0 bg-black/20"></div>
        <div class="relative z-10 h-full flex flex-col justify-between">
          <div>
            <div class="flex items-center space-x-2 text-white mb-8">
              <i class='bx bx-movie-play text-3xl'></i>
              <span class="text-2xl font-bold">Webtan</span>
            </div>
            <div class="text-white">
              <h2 class="text-3xl font-bold mb-4">Welcome Back!</h2>
              <p class="text-orange-100 mb-6">Manage your anime platform with ease. Track users, content, and analytics all in one place.</p>
            </div>
          </div>
          <div class="text-white/80 text-sm">
            <div class="flex items-center space-x-4">
              <div class="flex -space-x-2">
                <div class="w-8 h-8 rounded-full bg-white/20 border-2 border-white/50 flex items-center justify-center">
                  <i class='bx bx-user text-sm'></i>
                </div>
                <div class="w-8 h-8 rounded-full bg-white/20 border-2 border-white/50 flex items-center justify-center">
                  <i class='bx bx-film text-sm'></i>
                </div>
                <div class="w-8 h-8 rounded-full bg-white/20 border-2 border-white/50 flex items-center justify-center">
                  <i class='bx bx-stats text-sm'></i>
                </div>
              </div>
              <span>Join 1,000+ anime admins</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Side - Forms -->
      <div class="p-8 md:p-12">
        <!-- Logo Mobile -->
        <div class="flex justify-center md:hidden mb-8">
          <div class="flex items-center space-x-2 text-orange-500">
            <i class='bx bx-movie-play text-3xl'></i>
            <span class="text-2xl font-bold">Webtan</span>
          </div>
        </div>

        <!-- Form Title -->
        <h3 class="text-2xl font-bold text-white mb-6 text-center" id="form-title">Login to Dashboard</h3>

        <!-- Login Form -->
        <form id="login-form" class="space-y-5 form-transition">
          <div>
            <label class="block text-sm font-medium text-gray-300 mb-2">
              <i class='bx bx-envelope mr-1'></i> Email Address
            </label>
            <input type="email" 
                   id="login-email" 
                   placeholder="Enter your email"
                   class="w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 
                          focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent
                          transition duration-200"
                   required>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-300 mb-2">
              <i class='bx bx-lock-alt mr-1'></i> Password
            </label>
            <input type="password" 
                   id="login-password" 
                   placeholder="Enter your password"
                   class="w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 
                          focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent
                          transition duration-200"
                   required>
          </div>
          <div class="flex items-center justify-between">
            <label class="flex items-center">
              <input type="checkbox" class="rounded bg-gray-700 border-gray-600 text-orange-500 focus:ring-orange-500">
              <span class="ml-2 text-sm text-gray-300">Remember me</span>
            </label>
            <a href="#" class="text-sm text-orange-400 hover:text-orange-300 hover:underline">Forgot password?</a>
          </div>
          <button type="submit" 
                  class="w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white font-semibold py-3 px-4 rounded-xl
                         hover:from-orange-600 hover:to-orange-700 transition duration-200 transform hover:scale-[1.02]
                         focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 focus:ring-offset-gray-800">
            <i class='bx bx-log-in mr-2'></i> Login
          </button>
          <p class="text-center text-sm text-gray-400">
            Don't have an account? 
            <a href="#" class="text-orange-400 hover:text-orange-300 font-medium hover:underline" id="show-register">
              Create account
            </a>
          </p>
        </form>

        <!-- Register Form -->
        <form id="register-form" class="space-y-4 hidden form-transition">
          <div>
            <label class="block text-sm font-medium text-gray-300 mb-2">
              <i class='bx bx-user mr-1'></i> Full Name
            </label>
            <input type="text" 
                   id="register-name" 
                   placeholder="Enter your full name"
                   class="w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 
                          focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent
                          transition duration-200"
                   required>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-300 mb-2">
              <i class='bx bx-envelope mr-1'></i> Email Address
            </label>
            <input type="email" 
                   id="register-email" 
                   placeholder="Enter your email"
                   class="w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 
                          focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent
                          transition duration-200"
                   required>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-300 mb-2">
              <i class='bx bx-lock-alt mr-1'></i> Password
            </label>
            <input type="password" 
                   id="register-password" 
                   placeholder="Create a password"
                   class="w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 
                          focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent
                          transition duration-200"
                   required>
            <p class="text-xs text-gray-400 mt-1">Minimum 6 characters</p>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-300 mb-2">
              <i class='bx bx-lock-alt mr-1'></i> Confirm Password
            </label>
            <input type="password" 
                   id="register-confirm-password" 
                   placeholder="Confirm your password"
                   class="w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 
                          focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent
                          transition duration-200"
                   required>
          </div>
          <button type="submit" 
                  class="w-full bg-gradient-to-r from-green-500 to-green-600 text-white font-semibold py-3 px-4 rounded-xl
                         hover:from-green-600 hover:to-green-700 transition duration-200 transform hover:scale-[1.02]
                         focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-800">
            <i class='bx bx-user-plus mr-2'></i> Create Account
          </button>
          <p class="text-center text-sm text-gray-400">
            Already have an account? 
            <a href="#" class="text-orange-400 hover:text-orange-300 font-medium hover:underline" id="show-login">
              Sign in
            </a>
          </p>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Enhanced Script -->
<script>
  (function() {
    // DOM Elements
    const loginForm = document.getElementById('login-form');
    const registerForm = document.getElementById('register-form');
    const formTitle = document.getElementById('form-title');

    // Toggle Forms
    function showLoginForm() {
      loginForm.classList.remove('hidden');
      registerForm.classList.add('hidden');
      formTitle.innerText = 'Login to Dashboard';
    }

    function showRegisterForm() {
      registerForm.classList.remove('hidden');
      loginForm.classList.add('hidden');
      formTitle.innerText = 'Create Account';
    }

    // Event Listeners for Toggles
    document.getElementById('show-register').addEventListener('click', (e) => {
      e.preventDefault();
      showRegisterForm();
    });

    document.getElementById('show-login').addEventListener('click', (e) => {
      e.preventDefault();
      showLoginForm();
    });

    // Initialize default users if none exist
    function initializeDefaultUsers() {
      let users = JSON.parse(localStorage.getItem('users')) || [];
      
      if (users.length === 0) {
        // Add default admin user
        users.push({
          name: 'Admin User',
          email: 'admin@webtan.com',
          password: 'admin123',
          role: 'Admin',
          date: new Date().toLocaleDateString('en-US')
        });
        
        // Add demo users
        users.push({
          name: 'John Doe',
          email: 'john@example.com',
          password: 'password123',
          role: 'Editor',
          date: new Date().toLocaleDateString('en-US')
        });
        
        users.push({
          name: 'Jane Smith',
          email: 'jane@example.com',
          password: 'password123',
          role: 'User',
          date: new Date().toLocaleDateString('en-US')
        });
        
        localStorage.setItem('users', JSON.stringify(users));
      }
    }

    // Call initialization
    initializeDefaultUsers();

    // Register Form Handler
    registerForm.addEventListener('submit', (e) => {
      e.preventDefault();
      
      // Get form values
      const name = document.getElementById('register-name').value.trim();
      const email = document.getElementById('register-email').value.trim().toLowerCase();
      const password = document.getElementById('register-password').value;
      const confirmPassword = document.getElementById('register-confirm-password').value;

      // Validation
      if (!name || !email || !password) {
        alert('Please fill in all fields');
        return;
      }

      if (password.length < 6) {
        alert('Password must be at least 6 characters long');
        return;
      }

      if (password !== confirmPassword) {
        alert('Passwords do not match!');
        return;
      }

      // Email validation
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        alert('Please enter a valid email address');
        return;
      }

      // Check if user exists
      let users = JSON.parse(localStorage.getItem('users')) || [];
      
      if (users.find(u => u.email.toLowerCase() === email)) {
        alert('An account with this email already exists');
        return;
      }

      // Create new user
      const newUser = {
        id: Date.now(),
        name: name,
        email: email,
        password: password,
        role: 'User',
        date: new Date().toLocaleDateString('en-US'),
        status: 'active',
        createdAt: new Date().toISOString()
      };

      // Save user
      users.push(newUser);
      localStorage.setItem('users', JSON.stringify(users));

      // Show success message
      alert('Account created successfully! Please login.');
      
      // Switch to login form
      showLoginForm();
      
      // Clear register form
      registerForm.reset();
    });

    // Login Form Handler
    loginForm.addEventListener('submit', (e) => {
      e.preventDefault();
      
      // Get form values
      const email = document.getElementById('login-email').value.trim().toLowerCase();
      const password = document.getElementById('login-password').value;

      // Validation
      if (!email || !password) {
        alert('Please enter both email and password');
        return;
      }

      // Get users
      let users = JSON.parse(localStorage.getItem('users')) || [];
      
      // Find user
      const user = users.find(u => 
        u.email.toLowerCase() === email && u.password === password
      );

      if (user) {
        // Create session (exclude password)
        const { password, ...userSession } = user;
        localStorage.setItem('currentUser', JSON.stringify(userSession));
        
        // Show success message
        alert(`Welcome back, ${user.name}!`);
        
        // Redirect to dashboard
        window.location.href = 'admin/index.html';
      } else {
        alert('Invalid email or password!');
      }
    });

    // Add password visibility toggle (optional enhancement)
    function addPasswordToggle() {
      const passwordFields = document.querySelectorAll('input[type="password"]');
      
      passwordFields.forEach(field => {
        const wrapper = field.parentElement;
        const toggleBtn = document.createElement('button');
        toggleBtn.type = 'button';
        toggleBtn.className = 'absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-300';
        toggleBtn.innerHTML = '<i class="bx bx-show"></i>';
        
        wrapper.style.position = 'relative';
        field.classList.add('pr-10');
        wrapper.appendChild(toggleBtn);
        
        toggleBtn.addEventListener('click', function() {
          const type = field.type === 'password' ? 'text' : 'password';
          field.type = type;
          this.innerHTML = type === 'password' ? '<i class="bx bx-show"></i>' : '<i class="bx bx-hide"></i>';
        });
      });
    }

    // Call password toggle if needed
    // addPasswordToggle(); // Uncomment to enable

  })();
</script>

</body>
</html>